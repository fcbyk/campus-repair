(function(){"use strict";var e={1105:function(e,t,s){var a=s(153),i=s.n(a),o=s(7881),r=s.n(o),n=s(7934),l=s.n(n),d=s(4359),u=s.n(d),c=s(8192),h=s.n(c),m=s(7342),p=s.n(m),g=s(1168),f=s.n(g),v=s(6445),_=s.n(v),b=s(3755),w=s.n(b),S=s(3256),C=s.n(S),y=s(2572),D=s.n(y),x=s(1540),k=s.n(x),$=s(642),O=s.n($),I=s(5981),T=s.n(I),V=s(8319),z=s.n(V),N=s(2244),P=s.n(N),q=s(5583),J=s.n(q),L=s(3959),Z=s.n(L),A=s(278),E=s.n(A),M=s(2804),j=s.n(M),F=s(6971),R=s.n(F),W=s(2086),U=s.n(W),H=s(3480),B=s.n(H),G=s(8902),K=s.n(G),Q=s(4514),X=s.n(Q),Y=s(5398),ee=s.n(Y),te=s(6369),se=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},ae=[],ie={name:"App"},oe=ie,re=s(1001),ne=(0,re.Z)(oe,se,ae,!1,null,null,null),le=ne.exports,de=s(2631),ue=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login"},[e._v(" "+e._s(e.WidthControl())+" "),t("Logo"),t("LoginForm"),t("div",{staticClass:"bott"},[t("RegisterAccount",{attrs:{cwidth:e.bwidth}}),t("TestAccount",{attrs:{cwidth:e.bwidth}}),t("a",{attrs:{href:"https://www.yuque.com/docs/share/7e6c1b5d-5487-4c0f-8384-1ea451914d51?# 《课程设计报告》",target:"blank"}},[e._v("课程设计报告")]),t("a",{attrs:{href:"https://element.eleme.cn/#/zh-CN",target:"blank"}},[e._v("Element UI")])],1)],1)},ce=[],he=function(){var e=this;e._self._c;return e._m(0)},me=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"logo"},[t("div",{staticClass:"change-icon"},[t("i",{staticClass:"el-icon-setting"})]),t("p",[e._v("热海大报修系统")])])}],pe={name:"Logo"},ge=pe,fe=(0,re.Z)(ge,he,me,!1,null,"66d756eb",null),ve=fe.exports,_e=function(){var e=this,t=e._self._c;return t("div",{staticClass:"loginform"},[t("el-input",{attrs:{placeholder:"请输入账号",id:"idd"},model:{value:e.id,callback:function(t){e.id=t},expression:"id"}}),t("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.pw,callback:function(t){e.pw=t},expression:"pw"}}),e._m(0),t("button",{staticClass:"btn-login",on:{click:e.login}},[e._v("登录")])],1)},be=[function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"wm"}},[t("a",{attrs:{href:"javascript:void"}},[e._v("忘记密码?  ")])])}],we=s(6265),Se=s.n(we),Ce=Se().create({baseURL:"https://ali.fcbyk.com:8080"});let ye="";var De={name:"LoginForm",data(){return{id:ye,pw:ye}},methods:{getpush(){Ce({method:"POST",url:"/getpush",params:{id:sessionStorage.getItem("id")}}).then((e=>{sessionStorage.setItem("push",JSON.stringify(e.data))}),(()=>{}))},getreceiving(){Ce({method:"POST",url:"/getreceiving",params:{id:sessionStorage.getItem("id")}}).then((e=>{sessionStorage.setItem("receiving",JSON.stringify(e.data))}),(()=>{}))},getfinished(){Ce({method:"POST",url:"/getfinished",params:{id:sessionStorage.getItem("id")}}).then((e=>{sessionStorage.setItem("finished",JSON.stringify(e.data))}),(()=>{}))},login(){return this.id==ye?(this.$message.error({message:"请输入账号",showClose:!0,duration:1e3}),0):this.pw==ye?(this.$message.error({message:"请输入密码",showClose:!0,duration:1e3}),0):void Ce({method:"POST",url:"/login",params:{id:this.id,pw:this.pw}}).then((e=>{"successful"==e.data&&(sessionStorage.setItem("id",this.id),this.beforelogin(),this.getpush(),this.getreceiving(),this.getfinished(),this.$message.success({message:"登录成功",showClose:!0,duration:1e3}),"r"==this.id[0]?Vs.replace({name:"work"}):Vs.replace("/phone/new-order")),"err"==e.data&&this.$message.error({message:"密码错误",showClose:!0,duration:1e3}),"empty"==e.data&&this.$message.error({message:"不存在该账号",showClose:!0,duration:1e3})}),(()=>{this.$message.error({message:"数据库连接失败",showClose:!0,duration:1e3})}))},beforelogin(){Ce({method:"POST",url:"/user",params:{id:this.id}}).then((e=>{sessionStorage.setItem("name",e.data[0].user_name),sessionStorage.setItem("gender",e.data[0].user_gender),sessionStorage.setItem("phone",e.data[0].user_phone),sessionStorage.setItem("sort",e.data[0].user_sort),sessionStorage.setItem("addr",e.data[0].user_addr),sessionStorage.setItem("photo",e.data[0].user_photo)})),"r"==this.id[0]&&Ce({method:"POST",url:"/category",params:{id:this.id}}).then((e=>{sessionStorage.setItem("category",e.data[0].category)}))}}},xe=De,ke=(0,re.Z)(xe,_e,be,!1,null,null,null),$e=ke.exports,Oe=function(){var e=this,t=e._self._c;return t("span",[t("a",{on:{click:function(t){e.drawer=!0},mouseup:e.pwDrawer}},[e._v("测试账号")]),t("el-drawer",{attrs:{title:"已注册账号",visible:e.drawer,direction:"ltr",size:e.cwidth},on:{"update:visible":function(t){e.drawer=t}}},e._l(e.ax,(function(s){return t("div",{key:s.id,staticClass:"list"},[t("p",[e._v("名字: "+e._s(s.name))]),t("p",[e._v("账号: "+e._s(s.id))]),t("p",[e._v("密码: "+e._s(s.pw))])])})),0)],1)},Ie=[];let Te=window.innerWidth;var Ve={name:"TestAccount",props:["cwidth"],data(){return{drawer:!1,ax:"内容为空",lwidth:"30%",width1:Te}},methods:{pwDrawer(){Ce.get("/test").then((e=>{this.ax=e.data}))}}},ze=Ve,Ne=(0,re.Z)(ze,Oe,Ie,!1,null,"7b3e349a",null),Pe=Ne.exports,qe=function(){var e=this,t=e._self._c;return t("span",[t("a",{on:{click:function(t){e.dialogVisible=!0}}},[e._v("注册账号")]),t("el-dialog",{attrs:{title:"注册账号",visible:e.dialogVisible,width:e.cwidth,"before-close":e.cancel},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticStyle:{height:"30px"}}),t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"我是"}},[t("el-select",{attrs:{placeholder:"你的身份"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}},[t("el-option",{attrs:{label:"学生",value:"student"}}),t("el-option",{attrs:{label:"教职工",value:"staff"}}),t("el-option",{attrs:{label:"维修师傅",value:"repairMan"}})],1)],1),t("el-form-item",{attrs:{label:"设置账号"}},[t("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"设置密码"}},[t("el-input",{attrs:{"show-password":""},model:{value:e.form.zpw1,callback:function(t){e.$set(e.form,"zpw1",t)},expression:"form.zpw1"}})],1),t("el-form-item",{attrs:{label:"确认密码"}},[t("el-input",{attrs:{"show-password":""},model:{value:e.form.zpw2,callback:function(t){e.$set(e.form,"zpw2",t)},expression:"form.zpw2"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即创建")]),t("el-button",{on:{click:function(t){return e.cancel("确认关闭？")}}},[e._v("取消")])],1)],1)],1)],1)},Je=[];let Le="";var Ze={name:"RegisterAccount",props:["cwidth"],data(){return{dialogVisible:!1,form:{name:Le,region:Le,zpw1:Le,zpw2:Le}}},methods:{cancel(){this.$confirm("确认关闭？","",{customClass:"message"}).then((()=>{this.dialogVisible=!1,this.form.name=Le,this.form.region=Le,this.form.zpw1=Le,this.form.zpw2=Le})).catch((()=>{}))},onSubmit(){return this.form.region==Le?(this.$message.error({message:"请选择你的身份",duration:2e3,showClose:!0}),0):this.form.name==Le?(this.$message.error({message:"账号不能为空",duration:2e3,showClose:!0}),0):this.form.zpw1==Le?(this.$message.error({message:"密码不能为空",duration:2e3,showClose:!0}),0):this.form.zpw1!=this.form.zpw2?(this.$message.error({message:"两次输入的密码不一致",duration:2e3,showClose:!0}),0):"student"==this.form.region&&"s"!=this.form.name[0]?(this.$message.error({message:"学生账号必须以s开头",duration:2e3,showClose:!0}),0):"staff"==this.form.region&&"t"!=this.form.name[0]?(this.$message.error({message:"教职工账号必须以t开头",duration:2e3,showClose:!0}),0):"repairMan"==this.form.region&&"r"!=this.form.name[0]?(this.$message.error({message:"维修师傅账号必须以r开头",duration:1e3,showClose:!0}),0):void Ce({method:"POST",url:"/register",params:{id:this.form.name,pw:this.form.zpw2,sort:this.form.region}}).then((e=>{"successful"==e.data&&(this.$notify({title:"注册成功",message:"请记住你的账号密码",type:"success",duration:2e3}),this.dialogVisible=!1,this.form.name=Le,this.form.region=Le,this.form.zpw1=Le,this.form.zpw2=Le),"err"==e.data&&this.$notify.error({title:"注册失败",message:"已存在该账号",duration:2e3})}),(()=>{this.$notify.error({title:"注册失败",message:"已存在该账号",duration:2e3})}))}}},Ae=Ze,Ee=(0,re.Z)(Ae,qe,Je,!1,null,null,null),Me=Ee.exports;let je=window.innerWidth;var Fe={name:"Login",components:{Logo:ve,LoginForm:$e,TestAccount:Pe,RegisterAccount:Me},data(){return{awidth:je,bwidth:"30%"}},methods:{WidthControl(){console.log(this.awidth),this.awidth<=900?this.bwidth="90%":this.bwidth="30%"}}},Re=Fe,We=(0,re.Z)(Re,ue,ce,!1,null,null,null),Ue=We.exports,He=function(){var e=this,t=e._self._c;return t("div",{staticClass:"overall"},[e._m(0),t("div",{staticClass:"content"},[t("router-view")],1),t("div",{staticClass:"nav"},[t("input",{attrs:{type:"radio",name:"tab",id:"home",checked:""}}),t("input",{attrs:{type:"radio",name:"tab",id:"comment"}}),t("input",{attrs:{type:"radio",name:"tab",id:"heart"}}),t("label",{staticClass:"home",attrs:{for:"home"},on:{click:function(t){return e.tonew("neworder")}}},[t("div",{staticClass:"icc"},[t("i",{class:e.nav1icon})]),t("p",[e._v(e._s(e.nav1))])]),t("label",{staticClass:"comment",attrs:{for:"comment"},on:{click:function(t){return e.tonew("ordermanagement")}}},[t("div",{staticClass:"icc"},[t("i",{class:e.nav2icon})]),t("p",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.nav2))])]),t("label",{staticClass:"heart",attrs:{for:"heart"},on:{click:function(t){return e.tonew("manageaccount")}}},[t("div",{staticClass:"icc"},[t("i",{class:e.nav3icon})]),t("p",[e._v(e._s(e.nav3))])]),t("div",{staticClass:"tab"})])])},Be=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"tip"},[t("h2",[e._v("很抱歉，该系统还未适配pc端")]),t("p",[e._v("请把浏览器宽度减小到800px以下")]),t("p",[e._v("以触发CSS渲染画面")])])}],Ge={name:"Phone",data(){return{to:"",nav1:"故障上报",nav2:"故障单",nav3:"账号管理",nav1icon:"el-icon-edit",nav2icon:"el-icon-document",nav3icon:"el-icon-user"}},mounted(){"r"==sessionStorage.getItem("id")[0]&&(this.nav1="工作",this.nav2="已完成",this.nav3="账号",this.nav1icon="el-icon-s-cooperation",this.nav2icon="el-icon-s-claim",this.nav3icon="el-icon-s-custom")},methods:{tonew(e){return e==this.to?0:(this.to=e,"neworder"==e&&"r"==sessionStorage.getItem("id")[0]?(Vs.replace({name:"work"}),0):"ordermanagement"==e&&"r"==sessionStorage.getItem("id")[0]?(Vs.replace({name:"completed"}),0):void Vs.replace({name:e}))}}},Ke=Ge,Qe=(0,re.Z)(Ke,He,Be,!1,null,"bbbf21b2",null),Xe=Qe.exports,Ye=function(){var e=this,t=e._self._c;return t("div",{staticClass:"new"},[e._m(0),t("div",{staticClass:"newbot"},[t("div",{staticClass:"box1",on:{click:function(t){e.dialogVisible=!0}}},[e._m(1),e._m(2)]),t("div",{staticClass:"box2",on:{click:e.neworder}},[e._m(3),e._m(4)])]),t("el-dialog",{attrs:{visible:e.dialogVisible,width:"90%","custom-class":"menudialog",top:"15vh"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"diaa"},[t("p",{staticClass:"phonetitle"},[e._v("后勤报修")]),e._l(e.ax,(function(s){return t("p",{key:s.rid},[e._v(" "+e._s(s.name)+": "+e._s(s.phone))])})),t("p",{staticClass:"phonetitle"},[e._v("水表、一卡通")]),e._l(e.bx,(function(s){return t("p",{key:s.rid},[e._v(" "+e._s(s.name)+": "+e._s(s.phone))])})),t("p",{staticClass:"phonetitle"},[e._v("室内热水")]),e._l(e.cx,(function(s){return t("p",{key:s.rid},[e._v(" "+e._s(s.name)+": "+e._s(s.phone))])})),t("p",{staticClass:"phonetitle"},[e._v("空调维修")]),e._l(e.dx,(function(s){return t("p",{key:s.rid},[e._v(" "+e._s(s.name)+": "+e._s(s.phone))])})),t("p",{staticClass:"phonetitle"},[e._v("楼道饮水机维修")]),e._l(e.ex,(function(s){return t("p",{key:s.rid},[e._v(" "+e._s(s.name)+": "+e._s(s.phone))])})),t("p",{staticClass:"phonetitle"},[e._v("消防")]),e._l(e.fx,(function(s){return t("p",{key:s.rid},[e._v(" "+e._s(s.name)+": "+e._s(s.phone))])}))],2)]),t("el-dialog",{attrs:{visible:e.dialogVisible2,fullscreen:!0,title:"填写故障单","show-close":!1},on:{"update:visible":function(t){e.dialogVisible2=t}}},[t("div",{staticStyle:{height:"30px"}}),t("el-form",{ref:"user",attrs:{model:e.user,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"维修类别"}},[t("el-select",{attrs:{placeholder:"请选择类别"},model:{value:e.user.sort,callback:function(t){e.$set(e.user,"sort",t)},expression:"user.sort"}},[t("el-option",{attrs:{value:"后勤报修"}}),t("el-option",{attrs:{value:"水表、一卡通"}}),t("el-option",{attrs:{value:"室内热水"}}),t("el-option",{attrs:{value:"空调维修"}}),t("el-option",{attrs:{value:"楼道饮水机维修"}}),t("el-option",{attrs:{value:"消防"}})],1)],1),t("el-form-item",{attrs:{label:"故障设备名称"}},[t("el-input",{model:{value:e.user.equ,callback:function(t){e.$set(e.user,"equ",t)},expression:"user.equ"}})],1),t("el-form-item",{attrs:{label:"地点"}},[t("el-input",{model:{value:e.user.addr,callback:function(t){e.$set(e.user,"addr",t)},expression:"user.addr"}})],1),t("el-form-item",{attrs:{label:"预约时间",size:"mini"}},[t("el-col",{attrs:{span:11}},[t("el-date-picker",{staticStyle:{width:"150%"},attrs:{type:"date",placeholder:"选择日期",disabled:""},model:{value:e.user.date1,callback:function(t){e.$set(e.user,"date1",t)},expression:"user.date1"}})],1),t("el-col",{staticClass:"line",attrs:{span:2}}),t("el-col",{attrs:{span:11}},[t("el-time-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"选择时间",disabled:""},model:{value:e.user.date2,callback:function(t){e.$set(e.user,"date2",t)},expression:"user.date2"}})],1)],1),t("el-form-item",{attrs:{label:"补充说明"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.user.note,callback:function(t){e.$set(e.user,"note",t)},expression:"user.note"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("立即上报")]),t("el-button",{on:{click:e.handleClose}},[e._v("取消")])],1)],1)],1)],1)},et=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"newtop"},[t("p",{staticClass:"new-title"},[e._v("欢迎使用热海大报修系统")]),t("p",[e._v("请选择您的报修方式")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"left"},[t("i",{staticClass:"el-icon-phone-outline"})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"right"},[t("i",[e._v("传统报修")]),t("p",[e._v("通过传统电话方式进行报修，本系统会为您提供维修电话")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"left"},[t("i",{staticClass:"el-icon-mobile-phone"})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"right"},[t("i",[e._v("线上报修")]),t("p",[e._v("通过填写一些简单的表单信息，进行故障上报")])])}];let tt="";var st={name:"PhoneNewOrder",data(){return{dialogVisible:!1,dialogVisible2:!1,user:{number:"",sort:"",equ:"",addr:"",note:"",date1:"",date2:""},ax:"",bx:"",cx:"",dx:"",ex:"",fx:""}},mounted(){Ce.get("/tradition-1").then((e=>{this.ax=e.data})),Ce.get("/tradition-2").then((e=>{this.bx=e.data})),Ce.get("/tradition-3").then((e=>{this.cx=e.data})),Ce.get("/tradition-4").then((e=>{this.dx=e.data})),Ce.get("/tradition-5").then((e=>{this.ex=e.data})),Ce.get("/tradition-6").then((e=>{this.fx=e.data}))},methods:{neworder(){let e=new Date;this.user.number="f"+e.getDate()+e.getDay()+e.getHours()+parseInt(1e4*Math.random()),this.dialogVisible2=!0},handleClose(){this.$confirm("确认关闭？",{customClass:"message"}).then((()=>{this.dialogVisible2=!1,this.user.number=tt,this.user.sort=tt,this.user.equ=tt,this.user.addr=tt,this.user.note=tt})).catch((()=>{}))},getpush(){Ce({method:"POST",url:"/getpush",params:{id:sessionStorage.getItem("id")}}).then((e=>{sessionStorage.setItem("push",JSON.stringify(e.data))}),(()=>{}))},confirm(){return this.user.sort==tt?(this.$message.error({message:"请选择维修类别",duration:1500,showClose:!0}),0):this.user.equ==tt?(this.$message.error({message:"请填写故障设备名称",duration:1500,showClose:!0}),0):this.user.addr==tt?(this.$message.error({message:"请填写维修地点",duration:1500,showClose:!0}),0):void Ce({method:"POST",url:"/neworder",params:{number:this.user.number,sort:this.user.sort,equ:this.user.equ,addr:this.user.addr,note:this.user.note,uid:sessionStorage.getItem("id")}}).then((e=>{"successful"==e.data&&(this.dialogVisible2=!1,this.$message.success({message:"故障单已成功生成",duration:1500,showClose:!0}),this.getpush(),this.user.number=tt,this.user.sort=tt,this.user.equ=tt,this.user.addr=tt,this.user.note=tt),"err"==e.data&&this.$message.error({message:"添加失败,请重试",duration:1500,showClose:!0})}),(()=>{this.$message.error({message:"数据库连接失败",duration:1500,showClose:!0})}))}}},at=st,it=(0,re.Z)(at,Ye,et,!1,null,"33b60f94",null),ot=it.exports,rt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"all"},[t("div",{staticClass:"photo"},[t("div",[t("span",{on:{click:e.alter}},[t("el-avatar",{attrs:{src:e.circleUrl,size:150}})],1)]),t("div",[t("p",{staticClass:"name"},[e._v(e._s(e.user.name))]),t("el-tag",{staticClass:"tag"},[e._v(e._s(e.tag1))]),e.isnew?t("el-tag",{staticClass:"tag",attrs:{type:"success"}},[e._v("新用户")]):e._e(),e.isdispaly?t("el-tag",{staticClass:"tag",attrs:{type:"info"}},[e._v(e._s(e.user.category))]):e._e()],1)]),t("div",{staticClass:"card"},[t("div",{staticClass:"card-top"},[t("p",[e._v("基本信息")]),t("p",{staticClass:"alter",on:{click:function(t){e.dialogVisible2=!0}}},[e._v("修改")]),t("el-dialog",{attrs:{visible:e.dialogVisible2,fullscreen:!0,title:"修改个人信息","show-close":!1},on:{"update:visible":function(t){e.dialogVisible2=t}}},[t("div",{staticStyle:{height:"30px"}}),t("el-form",{ref:"user",attrs:{model:e.user,"label-width":"70px"}},[t("el-form-item",{attrs:{label:"ID"}},[t("el-input",{attrs:{disabled:""},model:{value:e.id,callback:function(t){e.id=t},expression:"id"}})],1),t("el-form-item",{attrs:{label:"名字"}},[t("el-input",{model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1),t("el-form-item",{attrs:{label:"人员类别"}},[t("el-select",{attrs:{placeholder:"请选择类别",disabled:""},model:{value:e.user.sort,callback:function(t){e.$set(e.user,"sort",t)},expression:"user.sort"}},[t("el-option",{attrs:{label:"学生",value:"student"}}),t("el-option",{attrs:{label:"教职工",value:"staff"}}),t("el-option",{attrs:{label:"维修师傅",value:"repairMan"}})],1)],1),e.isdispaly?t("el-form-item",{attrs:{label:"维修类别"}},[t("el-select",{attrs:{placeholder:"请选择类别"},model:{value:e.user.category,callback:function(t){e.$set(e.user,"category",t)},expression:"user.category"}},[t("el-option",{attrs:{value:"后勤报修"}}),t("el-option",{attrs:{value:"水表、一卡通"}}),t("el-option",{attrs:{value:"室内热水"}}),t("el-option",{attrs:{value:"空调维修"}}),t("el-option",{attrs:{value:"楼道饮水机维修"}}),t("el-option",{attrs:{value:"消防"}})],1)],1):e._e(),t("el-form-item",{attrs:{label:"性别"}},[t("el-select",{attrs:{placeholder:"请选择性别"},model:{value:e.user.gender,callback:function(t){e.$set(e.user,"gender",t)},expression:"user.gender"}},[t("el-option",{attrs:{label:"男",value:"男"}}),t("el-option",{attrs:{label:"女",value:"女"}})],1)],1),t("el-form-item",{attrs:{label:"联系电话"}},[t("el-input",{model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1),t("el-form-item",{attrs:{label:"默认地址"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.user.addr,callback:function(t){e.$set(e.user,"addr",t)},expression:"user.addr"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("修改")]),t("el-button",{on:{click:e.handleClose}},[e._v("取消")])],1)],1)],1)],1),t("hr"),t("div",{staticClass:"card-bot"},[t("p",[e._v("id："+e._s(e.id))]),t("p",[e._v("姓名："+e._s(e.user.name))]),t("p",[e._v("人员类别："+e._s(e.tag1))]),e.isdispaly?t("p",[e._v("维修类别："+e._s(e.user.category))]):e._e(),t("p",[e._v("性别："+e._s(e.user.gender))]),t("p",[e._v("联系电话："+e._s(e.user.phone))]),t("p",[e._v("常用地址："+e._s(e.user.addr))])])]),t("div",{staticClass:"log-out"},[t("el-button",{attrs:{type:"info",icon:"el-icon-more"},on:{click:function(t){e.dialogVisible=!0}}}),t("el-button",{attrs:{type:"info"},on:{click:e.logout}},[e._v("退出登录")])],1),t("el-dialog",{attrs:{visible:e.dialogVisible,width:"70%","show-close":!1,"custom-class":"menudialog",top:"30vh"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"dia"},[t("div",{staticClass:"change-icon"},[t("i",{staticClass:"el-icon-setting"})]),t("p",{staticClass:"hh"},[e._v("热海大报修系统")]),t("p",{staticClass:"tt"},[e._v("系统版本号：v0.1.0")]),t("p",{staticClass:"tt"},[e._v("最近一次更新时间：2022-08-22")]),t("div",{staticClass:"aa"},[t("a",{attrs:{href:"javaScript:void(0) "}},[e._v("bug反馈")]),t("a",{attrs:{href:"javaScript:void(0) "}},[e._v("联系我们")])])])])],1)},nt=[],lt={name:"PhoneManageAccount",data(){return{id:sessionStorage.getItem("id"),circleUrl:"http://ali.fcbyk.com/images/"+sessionStorage.getItem("photo"),user:{name:sessionStorage.getItem("name"),gender:sessionStorage.getItem("gender"),phone:sessionStorage.getItem("phone"),addr:sessionStorage.getItem("addr"),sort:sessionStorage.getItem("sort"),category:sessionStorage.getItem("category")},state:!0,dialogVisible:!1,dialogVisible2:!1,tag1:"",isdispaly:!1,isnew:!1}},mounted(){"student"==this.user.sort?this.tag1="学生":"staff"==this.user.sort?this.tag1="教职工":this.tag1="维修师傅","r"==this.id[0]&&(this.isdispaly=!0),"新用户"==this.user.name&&(this.isnew=!0)},methods:{beforelogin(){Ce({method:"POST",url:"/user",params:{id:sessionStorage.getItem("id")}}).then((e=>{sessionStorage.setItem("name",e.data[0].user_name),sessionStorage.setItem("gender",e.data[0].user_gender),sessionStorage.setItem("phone",e.data[0].user_phone),sessionStorage.setItem("sort",e.data[0].user_sort),sessionStorage.setItem("addr",e.data[0].user_addr)})),"r"==this.id[0]&&Ce({method:"POST",url:"/category",params:{id:this.id}}).then((e=>{sessionStorage.setItem("category",e.data[0].category)}))},alter(){this.$message({showClose:!0,message:"暂不支持修改头像噢",type:"error",duration:1500})},confirm(){Ce({method:"POST",url:"/alter-user",params:{id:sessionStorage.getItem("id"),name:this.user.name,gender:this.user.gender,phone:this.user.phone,addr:this.user.addr,category:this.user.category}}).then((e=>{"successful"==e.data&&(this.beforelogin(),this.dialogVisible2=!1,this.$message({message:"修改成功",type:"success",duration:1500,showClose:!0}))}),(()=>{this.$message.error({message:"数据库连接失败",duration:1500,showClose:!0})}))},user_info(){Ce({method:"POST",url:"/user",params:{id:sessionStorage.getItem("id")}}).then((e=>{console.log(e.data),this.user.name=e.data[0].user_name,this.user.gender=e.data[0].user_gender,this.user.phone=e.data[0].user_phone,this.user.sort=e.data[0].user_sort}))},logout(){this.$confirm(this.user.name+"，您要下线了吗","",{customClass:"message"}).then((()=>{Vs.replace("/"),sessionStorage.clear()})).catch((()=>{}))},handleClose(){this.$confirm("确认关闭？",{customClass:"message"}).then((()=>{this.dialogVisible2=!1})).catch((()=>{}))}}},dt=lt,ut=(0,re.Z)(dt,rt,nt,!1,null,"0e398d74",null),ct=ut.exports,ht=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ordermanage"},[t("el-tabs",{attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"推送中",name:"push"}}),t("el-tab-pane",{attrs:{label:"已接单",name:"receiving"}}),t("el-tab-pane",{attrs:{label:"已完成",name:"finished"}})],1),t("router-view")],1)},mt=[],pt={name:"PhoneOrderManagement",data(){return{activeName:"push"}},watch:{activeName:{immediate:!0,handler(e){Vs.replace({name:e})}}}},gt=pt,ft=(0,re.Z)(gt,ht,mt,!1,null,null,null),vt=ft.exports,_t=function(){var e=this,t=e._self._c;return t("div",{staticClass:"new"},[e._m(0),t("div",{staticClass:"newbot"},[t("div",{staticClass:"box1",on:{click:e.getsquare}},[e._m(1),e._m(2)]),t("div",{staticClass:"box2",on:{click:function(t){e.dialogVisible2=!0}}},[e._m(3),e._m(4)])]),t("el-dialog",{attrs:{visible:e.dialogVisible,fullscreen:!0,title:"系统为您推送的故障单"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("SquareTable")],1),t("el-dialog",{attrs:{visible:e.dialogVisible2,fullscreen:!0,title:"待完成的故障单"},on:{"update:visible":function(t){e.dialogVisible2=t}}},[t("ToDoListTable")],1)],1)},bt=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"newtop"},[t("p",{staticClass:"new-title"},[e._v("欢迎使用热海大报修系统")]),t("p",[e._v("天气炎热，记得多喝水噢")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"left"},[t("i",{staticClass:"el-icon-circle-plus"})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"right"},[t("i",[e._v("接单")]),t("p",[e._v("系统会为您推送与您维修类别相匹配的故障单")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"left"},[t("i",{staticClass:"el-icon-s-order"})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"right"},[t("i",[e._v("工作单")]),t("p",[e._v("您需要去完成的故障单")])])}],wt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"squaretables"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"medium"}},[t("el-table-column",{attrs:{label:"故障单号"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.rnumber))])]}}])}),t("el-table-column",{attrs:{label:"故障设备"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.f_equ))])]}}])}),t("el-table-column",{attrs:{label:"地点"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-popover",{attrs:{placement:"top"}},[t("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(t){return e.handleShow(s.$index,s.row)}}},[e._v("详细")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.handleAdd(s.$index,s.row)}}},[e._v("接单")]),t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("span",[e._v(e._s(s.row.place))])])],1)]}}])})],1),t("div",{staticClass:"refresh"},[t("el-button",{attrs:{size:"medium"},on:{click:e.refresh}},[e._v("刷新")])],1),t("el-dialog",{attrs:{visible:e.dialogVisible,width:"70%","show-close":!1,"custom-class":"menudialog",top:"20vh","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t},open:e.beforelogin}},[t("div",[t("p",[e._v("故障单号： "+e._s(e.showData.rnumber))]),t("p",[e._v("维修类别： "+e._s(e.showData.rsort))]),t("p",[e._v("故障设备： "+e._s(e.showData.f_equ))]),t("el-popover",{attrs:{placement:"top",title:"故障单发起人信息",width:"300",trigger:"click"}},[t("p",[e._v("名字："+e._s(e.user.name))]),t("p",[e._v("电话："+e._s(e.user.phone))]),t("p",[e._v("默认地址："+e._s(e.user.addr))]),t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("p",[e._v("故障单发起人： "+e._s(e.showData.init_id))])])]),t("p",[e._v("维修地点： "+e._s(e.showData.place))]),t("p",[e._v("维修备注："+e._s(e.showData.note))]),t("p",[e._v("创建时间："+e._s(e.date(e.showData.creation_time)))]),t("p",[e._v("故障单状态： "),t("el-tag",{attrs:{size:"mini",effect:"dark"}},[e._v(" "+e._s(e.showData.order_state))])],1)],1)])],1)},St=[],Ct={name:"SquareTable",data(){return{tableData:[],dialogVisible:!1,showData:[],user:{name:"",phone:"",addr:""}}},mounted(){this.tableData=JSON.parse(sessionStorage.getItem("square"))},methods:{beforelogin(){Ce({method:"POST",url:"/user",params:{id:this.showData.init_id}}).then((e=>{this.user.name=e.data[0].user_name,this.user.phone=e.data[0].user_phone,this.user.addr=e.data[0].user_addr}))},date(e){let t=new Date(e),s=t.toLocaleTimeString("chinese",{hour12:!1}),a=t.toLocaleDateString();return a+" "+s},handleShow(e,t){this.showData=t,this.dialogVisible=!0},handleAdd(e,t){this.$confirm("确认接单吗",{customClass:"message"}).then((()=>{Ce({method:"POST",url:"/order-receiving",params:{rnumber:t.rnumber,rid:sessionStorage.getItem("id")}}).then((()=>{Ce({method:"POST",url:"/getsquare",params:{category:sessionStorage.getItem("category")}}).then((e=>{sessionStorage.setItem("square",JSON.stringify(e.data)),this.tableData=JSON.parse(sessionStorage.getItem("square"))}),(()=>{})),this.$message.success({showClose:!0,message:"成功接单",duration:1500})}),(()=>{this.$message.error({message:"数据库连接失败",duration:1500,showClose:!0})}))})).catch((()=>{}))},refresh(){Ce({method:"POST",url:"/getsquare",params:{category:sessionStorage.getItem("category")}}).then((e=>{sessionStorage.setItem("square",JSON.stringify(e.data)),this.tableData=JSON.parse(sessionStorage.getItem("square")),this.$message.success({showClose:!0,message:"刷新成功",duration:1e3})}),(()=>{this.$message.error({message:"数据库连接失败",duration:1500,showClose:!0})}))}}},yt=Ct,Dt=(0,re.Z)(yt,wt,St,!1,null,"2c4c3e7c",null),xt=Dt.exports,kt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"todolisttables"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"medium"}},[t("el-table-column",{attrs:{label:"故障单号"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.rnumber))])]}}])}),t("el-table-column",{attrs:{label:"故障设备"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.f_equ))])]}}])}),t("el-table-column",{attrs:{label:"地点"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-popover",{attrs:{placement:"top"}},[t("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(t){return e.handleShow(s.$index,s.row)}}},[e._v("详细")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleOff(s.$index,s.row)}}},[e._v("取消")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.handleAcomplish(s.$index,s.row)}}},[e._v("已完成")]),t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("span",[e._v(e._s(s.row.place))])])],1)]}}])})],1),t("div",{staticClass:"refresh"},[t("el-button",{attrs:{size:"medium"},on:{click:e.refresh}},[e._v("刷新")])],1),t("el-dialog",{attrs:{visible:e.dialogVisible,width:"70%","show-close":!1,"custom-class":"menudialog",top:"20vh","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t},open:e.beforelogin}},[t("div",[t("p",[e._v("故障单号： "+e._s(e.showData.rnumber))]),t("p",[e._v("维修类别： "+e._s(e.showData.rsort))]),t("p",[e._v("故障设备： "+e._s(e.showData.f_equ))]),t("el-popover",{attrs:{placement:"top",title:"故障单发起人信息",width:"300",trigger:"click"}},[t("p",[e._v("名字："+e._s(e.user.name))]),t("p",[e._v("电话："+e._s(e.user.phone))]),t("p",[e._v("默认地址："+e._s(e.user.addr))]),t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("p",[e._v("故障单发起人： "+e._s(e.showData.init_id))])])]),t("p",[e._v("维修地点： "+e._s(e.showData.place))]),t("p",[e._v("维修备注："+e._s(e.showData.note))]),t("p",[e._v("创建时间："+e._s(e.date(e.showData.creation_time)))]),t("p",[e._v("接单时间："+e._s(e.date(e.showData.order_time)))]),t("p",[e._v("故障单状态： "),t("el-tag",{attrs:{size:"mini",effect:"dark",type:"success"}},[e._v(" "+e._s(e.showData.order_state))])],1)],1)])],1)},$t=[],Ot={name:"ToDoListTable",data(){return{tableData:[],dialogVisible:!1,showData:[],user:{name:"",phone:"",addr:""}}},mounted(){this.tableData=JSON.parse(sessionStorage.getItem("todolist"))},methods:{beforelogin(){Ce({method:"POST",url:"/user",params:{id:this.showData.init_id}}).then((e=>{this.user.name=e.data[0].user_name,this.user.phone=e.data[0].user_phone,this.user.addr=e.data[0].user_addr}))},handleOff(e,t){this.$confirm("确认取消吗",{customClass:"message"}).then((()=>{Ce({method:"POST",url:"/order-off",params:{rnumber:t.rnumber}}).then((()=>{Ce({method:"POST",url:"/gettodolist",params:{rid:sessionStorage.getItem("id")}}).then((e=>{sessionStorage.setItem("todolist",JSON.stringify(e.data)),this.tableData=JSON.parse(sessionStorage.getItem("todolist"))}),(()=>{})),this.$message.success({showClose:!0,message:"取消成功",duration:1e3})}),(()=>{this.$message.error({message:"数据库连接失败",duration:1500,showClose:!0})}))})).catch((()=>{}))},date(e){let t=new Date(e),s=t.toLocaleTimeString("chinese",{hour12:!1}),a=t.toLocaleDateString();return a+" "+s},handleShow(e,t){this.showData=t,this.dialogVisible=!0},handleAcomplish(e,t){this.$confirm("确定已经完成了吗",{customClass:"message"}).then((()=>{Ce({method:"POST",url:"/order-acomplish",params:{rnumber:t.rnumber}}).then((()=>{Ce({method:"POST",url:"/gettodolist",params:{rid:sessionStorage.getItem("id")}}).then((e=>{sessionStorage.setItem("todolist",JSON.stringify(e.data)),this.tableData=JSON.parse(sessionStorage.getItem("todolist"))}),(()=>{})),this.$message.success({showClose:!0,message:"故障维修完成，非常nice！",duration:1500})}),(()=>{this.$message.error({message:"数据库连接失败",duration:1500,showClose:!0})}))})).catch((()=>{}))},refresh(){Ce({method:"POST",url:"/gettodolist",params:{rid:sessionStorage.getItem("id")}}).then((e=>{sessionStorage.setItem("todolist",JSON.stringify(e.data)),this.tableData=JSON.parse(sessionStorage.getItem("todolist")),this.$message.success({showClose:!0,message:"刷新成功",duration:1e3})}),(()=>{this.$message.error({message:"数据库连接失败",duration:1500,showClose:!0})}))}}},It=Ot,Tt=(0,re.Z)(It,kt,$t,!1,null,"1a0bd130",null),Vt=Tt.exports,zt={name:"PhoneWork",components:{SquareTable:xt,ToDoListTable:Vt},data(){return{dialogVisible:!1,dialogVisible2:!1,user:{number:"",sort:"",equ:"",addr:"",note:"",date1:"",date2:""},ax:"",bx:"",cx:"",dx:"",ex:"",fx:""}},mounted(){window.setTimeout((()=>{Ce({method:"POST",url:"/getsquare",params:{category:sessionStorage.getItem("category")}}).then((e=>{sessionStorage.setItem("square",JSON.stringify(e.data))}),(()=>{})),Ce({method:"POST",url:"/gettodolist",params:{rid:sessionStorage.getItem("id")}}).then((e=>{sessionStorage.setItem("todolist",JSON.stringify(e.data))}),(()=>{})),Ce({method:"POST",url:"/getcompleted",params:{rid:sessionStorage.getItem("id")}}).then((e=>{sessionStorage.setItem("completed",JSON.stringify(e.data))}),(()=>{}))}),200)},methods:{getsquare(){this.dialogVisible=!0}}},Nt=zt,Pt=(0,re.Z)(Nt,_t,bt,!1,null,"2de1f9fa",null),qt=Pt.exports,Jt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"new"},[t("el-tabs",{attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"历史",name:"completed_table"}}),t("el-tab-pane",{attrs:{label:"数据统计",name:"echarts"}})],1),t("router-view")],1)},Lt=[],Zt={name:"PhoneCompleted",data(){return{activeName:"completed_table"}},watch:{activeName:{immediate:!0,handler(e){Vs.replace({name:e})}}}},At=Zt,Et=(0,re.Z)(At,Jt,Lt,!1,null,"085cb1ba",null),Mt=Et.exports,jt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"echarts"},[t("el-alert",{attrs:{type:"warning",title:"以下数据为静态数据，实时数据尚未关联","show-icon":""}}),t("div",{staticStyle:{height:"10px"}}),t("el-card",{staticClass:"box-card",attrs:{"v-show":e.vshow}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("您的服务分")])]),t("div",{staticClass:"chartbox1"},[t("div",{ref:"chartDom1",staticClass:"chartDom1"})]),t("p",[e._v("数据来源：完成故障单后的用户评价")])]),t("div",{staticStyle:{height:"20px"}}),t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("您最近一周的工作情况")])]),t("div",{staticClass:"chartbox2"},[t("div",{ref:"chartDom2",staticClass:"chartDom2"})]),t("p",[e._v("数据来源：每天所完成的故障单数")])]),t("div",{staticStyle:{height:"20px"}}),t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("您常去的地方")])]),t("div",{staticClass:"chartbox3"},[t("div",{ref:"chartDom3",staticClass:"chartDom3"})]),t("p",[e._v("数据来源：完成故障单的一级地址出现次数")])]),t("div",{staticStyle:{height:"20px"}})],1)},Ft=[],Rt=s(8720),Wt=s(6471),Ut=s(6803),Ht=s(7049),Bt=s(5977),Gt=s(22),Kt=s(5381),Qt=s(542),Xt=s(2015),Yt=s(9832),es=s(8971),ts=s(4978);Rt.D([Ut.N,Ht.N]),Rt.D([Bt.N,Gt.N,Kt.z]),Rt.D([Qt.N,Xt.N,Yt.N,es.N,ts.T]);var ss={name:"PhoneEcharts",data(){return{option:{series:[{type:"gauge",startAngle:180,endAngle:0,min:0,max:1,splitNumber:10,axisLine:{lineStyle:{width:3,color:[[.2,"#F56C6C"],[.4,"#E6A23C"],[.6,"#909399"],[.8,"#409EFF"],[1,"#20d56c"]]}},pointer:{icon:"path://M12.8,0.7l12,40.1H0.7L12.8,0.7z",length:"12%",width:10,offsetCenter:[0,"-60%"],itemStyle:{color:"auto"}},axisTick:{length:12,lineStyle:{color:"auto",width:1}},splitLine:{length:16,lineStyle:{color:"auto",width:2}},axisLabel:{color:"#464646",fontSize:10,distance:-50,formatter:function(e){return.9===e?"极好":.7===e?"优秀":.5===e?"良好":.3===e?"中等":.1===e?"较差":""}},title:{offsetCenter:[0,"-20%"],fontSize:10},detail:{fontSize:20,offsetCenter:[0,"0%"],valueAnimation:!0,formatter:function(e){return Math.round(100*e)+"分"},color:"auto"},data:[{value:.98,name:"您的服务极好"}]}]},option2:{xAxis:{type:"category",data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{type:"value"},series:[{data:[3,5,4,4,2,3,5],type:"line"}]},option3:{tooltip:{trigger:"item"},visualMap:{show:!1,min:80,max:600,inRange:{colorLightness:[0,1]}},series:[{name:"已完成故障单数",type:"pie",radius:"55%",center:["50%","50%"],data:[{value:335,name:"1栋学生公寓"},{value:310,name:"图书馆"},{value:274,name:"9栋学生公寓"},{value:235,name:"8栋教学楼"},{value:400,name:"黑超"}].sort((function(e,t){return e.value-t.value})),roseType:"radius",label:{color:"#909399"},labelLine:{lineStyle:{color:"#2c343c"},smooth:.2,length:10,length2:20},itemStyle:{color:"#c23531"},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(){return 200*Math.random()}}]},vshow:!1}},mounted(){Wt.S1(this.$refs.chartDom1).setOption(this.option),Wt.S1(this.$refs.chartDom2).setOption(this.option2),Wt.S1(this.$refs.chartDom3).setOption(this.option3)}},as=ss,is=(0,re.Z)(as,jt,Ft,!1,null,"7905bbe2",null),os=is.exports,rs=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pushtables"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"medium"}},[t("el-table-column",{attrs:{label:"故障单号"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.rnumber))])]}}])}),t("el-table-column",{attrs:{label:"维修类别"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.rsort))])]}}])}),t("el-table-column",{attrs:{label:"故障设备"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-popover",{attrs:{placement:"top"}},[t("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(t){return e.handleShow(s.$index,s.row)}}},[e._v("详细")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.handleEdit(s.$index,s.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(s.$index,s.row)}}},[e._v("删除")]),t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("span",[e._v(e._s(s.row.f_equ))])])],1)]}}])})],1),t("div",{staticClass:"refresh"},[t("el-button",{attrs:{size:"medium"},on:{click:e.refresh}},[e._v("刷新")])],1),t("el-dialog",{attrs:{visible:e.dialogVisible,width:"70%","show-close":!1,"custom-class":"menudialog",top:"20vh"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",[t("p",[e._v("故障单号： "+e._s(e.showData.rnumber))]),t("p",[e._v("维修类别： "+e._s(e.showData.rsort))]),t("p",[e._v("故障设备： "+e._s(e.showData.f_equ))]),t("p",[e._v("故障单发起人： "+e._s(e.showData.init_id))]),t("p",[e._v("维修地点： "+e._s(e.showData.place))]),t("p",[e._v("维修备注："+e._s(e.showData.note))]),t("p",[e._v("创建时间："+e._s(e.date(e.showData.creation_time)))]),t("p",[e._v("故障单状态： "),t("el-tag",{attrs:{size:"mini",effect:"dark"}},[e._v(" "+e._s(e.showData.order_state))])],1)])]),t("el-dialog",{attrs:{visible:e.dialogVisible2,fullscreen:!0,title:"修改故障单","show-close":!1},on:{"update:visible":function(t){e.dialogVisible2=t}}},[t("div",{staticStyle:{height:"30px"}}),t("el-form",{ref:"user",attrs:{model:e.showData,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"维修类别"}},[t("el-select",{attrs:{placeholder:"请选择类别"},model:{value:e.showData.rsort,callback:function(t){e.$set(e.showData,"rsort",t)},expression:"showData.rsort"}},[t("el-option",{attrs:{value:"后勤报修"}}),t("el-option",{attrs:{value:"水表、一卡通"}}),t("el-option",{attrs:{value:"室内热水"}}),t("el-option",{attrs:{value:"空调维修"}}),t("el-option",{attrs:{value:"楼道饮水机维修"}}),t("el-option",{attrs:{value:"消防"}})],1)],1),t("el-form-item",{attrs:{label:"故障设备名称"}},[t("el-input",{model:{value:e.showData.f_equ,callback:function(t){e.$set(e.showData,"f_equ",t)},expression:"showData.f_equ"}})],1),t("el-form-item",{attrs:{label:"地点"}},[t("el-input",{model:{value:e.showData.place,callback:function(t){e.$set(e.showData,"place",t)},expression:"showData.place"}})],1),t("el-form-item",{attrs:{label:"预约时间",size:"mini"}},[t("el-col",{attrs:{span:11}},[t("el-date-picker",{staticStyle:{width:"150%"},attrs:{type:"date",placeholder:"选择日期",disabled:""},model:{value:e.showData.date1,callback:function(t){e.$set(e.showData,"date1",t)},expression:"showData.date1"}})],1),t("el-col",{staticClass:"line",attrs:{span:2}}),t("el-col",{attrs:{span:11}},[t("el-time-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"选择时间",disabled:""},model:{value:e.showData.date2,callback:function(t){e.$set(e.showData,"date2",t)},expression:"showData.date2"}})],1)],1),t("el-form-item",{attrs:{label:"补充说明"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.showData.note,callback:function(t){e.$set(e.showData,"note",t)},expression:"showData.note"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("立即上报")]),t("el-button",{on:{click:function(t){e.dialogVisible2=!1}}},[e._v("取消")])],1)],1)],1)],1)},ns=[];let ls="";var ds={name:"PushTables",data(){return{tableData:[],dialogVisible:!1,dialogVisible2:!1,showData:[]}},mounted(){this.tableData=JSON.parse(sessionStorage.getItem("push"))},methods:{date(e){let t=new Date(e),s=t.toLocaleTimeString("chinese",{hour12:!1}),a=t.toLocaleDateString();return a+" "+s},handleShow(e,t){this.dialogVisible=!0,this.showData=t},handleEdit(e,t){this.showData=t,this.dialogVisible2=!0},handleDelete(e,t){console.log(e,t),this.$confirm("确定删除吗",{customClass:"message"}).then((()=>{this.deletethis(t.rnumber),this.tableData.splice(e,1),sessionStorage.setItem("push",JSON.stringify(this.tableData))}),(()=>{}))},refresh(){Ce({method:"POST",url:"/getpush",params:{id:sessionStorage.getItem("id")}}).then((e=>{sessionStorage.setItem("push",JSON.stringify(e.data)),this.tableData=JSON.parse(sessionStorage.getItem("push")),this.$message.success({showClose:!0,message:"刷新成功",duration:1e3})}),(()=>{this.$message.error({message:"数据库连接失败",duration:1500,showClose:!0})}))},deletethis(e){Ce({method:"POST",url:"/deletethis",params:{number:e}}).then((e=>{"successful"==e.data&&this.$message.success({message:"删除成功",duration:1500,showClose:!0})}),(()=>{this.$message.error({message:"数据库连接失败",duration:1500,showClose:!0})}))},confirm(){return this.showData.rsort==ls?(this.$message.error({message:"请选择维修类别",duration:1500,showClose:!0}),0):this.showData.f_equ==ls?(this.$message.error({message:"请填写故障设备名称",duration:1500,showClose:!0}),0):this.showData.place==ls?(this.$message.error({message:"请填写维修地点",duration:1500,showClose:!0}),0):void Ce({method:"POST",url:"/alterorder",params:{number:this.showData.rnumber,sort:this.showData.rsort,equ:this.showData.f_equ,addr:this.showData.place,note:this.showData.note}}).then((e=>{"successful"==e.data&&(Ce({method:"POST",url:"/getpush",params:{id:sessionStorage.getItem("id")}}).then((e=>{sessionStorage.setItem("push",JSON.stringify(e.data)),this.tableData=JSON.parse(sessionStorage.getItem("push"))}),(()=>{})),this.dialogVisible2=!1,this.$message.success({message:"修改成功",duration:1500,showClose:!0})),"err"==e.data&&this.$message.error({message:"修改失败",duration:1500,showClose:!0})}),(()=>{this.$message.error({message:"数据库连接失败",duration:1500,showClose:!0})}))}}},us=ds,cs=(0,re.Z)(us,rs,ns,!1,null,"181d41fd",null),hs=cs.exports,ms=function(){var e=this,t=e._self._c;return t("div",{staticClass:"receivingtables"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"medium"}},[t("el-table-column",{attrs:{label:"故障单号"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.rnumber))])]}}])}),t("el-table-column",{attrs:{label:"维修类别"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.rsort))])]}}])}),t("el-table-column",{attrs:{label:"故障设备"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-popover",{attrs:{placement:"top"}},[t("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(t){return e.handleEdit(s.$index,s.row)}}},[e._v("详细")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleOff(s.$index,s.row)}}},[e._v("取消")]),t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("span",[e._v(e._s(s.row.f_equ))])])],1)]}}])})],1),t("div",{staticClass:"refresh"},[t("el-button",{attrs:{size:"medium"},on:{click:e.refresh}},[e._v("刷新")])],1),t("el-dialog",{attrs:{visible:e.dialogVisible,width:"70%","show-close":!1,"custom-class":"menudialog",top:"20vh"},on:{"update:visible":function(t){e.dialogVisible=t},open:e.beforelogin}},[t("div",[t("p",[e._v("故障单号： "+e._s(e.showData.rnumber))]),t("p",[e._v("维修类别： "+e._s(e.showData.rsort))]),t("p",[e._v("故障设备： "+e._s(e.showData.f_equ))]),t("p",[e._v("故障单发起人： "+e._s(e.showData.init_id))]),t("p",[e._v("维修地点： "+e._s(e.showData.place))]),t("p",[e._v("维修备注："+e._s(e.showData.note))]),t("p",[e._v("创建时间："+e._s(e.date(e.showData.creation_time)))]),t("p",[e._v("接单时间："+e._s(e.date(e.showData.order_time)))]),t("el-popover",{attrs:{placement:"top",title:"接单师傅信息",width:"300",trigger:"click"}},[t("p",[e._v("名字："+e._s(e.user.name))]),t("p",[e._v("电话："+e._s(e.user.phone))]),t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("span",[e._v("接单师傅： "+e._s(e.showData.rid))])])]),t("p",[e._v("故障单状态： "),t("el-tag",{attrs:{size:"mini",effect:"dark",type:"success"}},[e._v(" "+e._s(e.showData.order_state))])],1)],1)])],1)},ps=[],gs={name:"ReceivingTable",data(){return{tableData:[],dialogVisible:!1,showData:[],user:{name:"",phone:"",addr:""}}},mounted(){this.tableData=JSON.parse(sessionStorage.getItem("receiving"))},methods:{beforelogin(){Ce({method:"POST",url:"/user",params:{id:this.showData.rid}}).then((e=>{this.user.name=e.data[0].user_name,this.user.phone=e.data[0].user_phone}))},date(e){let t=new Date(e),s=t.toLocaleTimeString("chinese",{hour12:!1}),a=t.toLocaleDateString();return a+" "+s},handleEdit(e,t){this.dialogVisible=!0,this.showData=t},refresh(){Ce({method:"POST",url:"/getreceiving",params:{id:sessionStorage.getItem("id")}}).then((e=>{sessionStorage.setItem("receiving",JSON.stringify(e.data)),this.tableData=JSON.parse(sessionStorage.getItem("receiving")),this.$message.success({showClose:!0,message:"刷新成功",duration:1e3})}),(()=>{this.$message.error({message:"数据库连接失败",duration:1500,showClose:!0})}))},handleOff(e,t){this.$confirm("确认取消吗",{customClass:"message"}).then((()=>{Ce({method:"POST",url:"/order-off",params:{rnumber:t.rnumber}}).then((()=>{Ce({method:"POST",url:"/getreceiving",params:{id:sessionStorage.getItem("id")}}).then((e=>{sessionStorage.setItem("receiving",JSON.stringify(e.data)),this.tableData=JSON.parse(sessionStorage.getItem("receiving"))}),(()=>{})),this.$message.success({showClose:!0,message:"取消成功",duration:1e3})}),(()=>{this.$message.error({message:"数据库连接失败",duration:1500,showClose:!0})}))})).catch((()=>{}))}}},fs=gs,vs=(0,re.Z)(fs,ms,ps,!1,null,"0dd22621",null),_s=vs.exports,bs=function(){var e=this,t=e._self._c;return t("div",{staticClass:"finishedtables"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"medium"}},[t("el-table-column",{attrs:{label:"故障单号"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.rnumber))])]}}])}),t("el-table-column",{attrs:{label:"维修类别"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.rsort))])]}}])}),t("el-table-column",{attrs:{label:"故障设备"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-popover",{attrs:{placement:"top"}},[t("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(t){return e.handleEdit(s.$index,s.row)}}},[e._v("详细")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.star}},[e._v("评价")]),t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("span",[e._v(e._s(s.row.f_equ))])])],1)]}}])})],1),t("div",{staticClass:"refresh"},[t("el-button",{attrs:{size:"medium"},on:{click:e.refresh}},[e._v("刷新")])],1),t("el-dialog",{attrs:{visible:e.dialogVisible,width:"70%","show-close":!1,"custom-class":"menudialog",top:"20vh"},on:{"update:visible":function(t){e.dialogVisible=t},open:e.beforelogin}},[t("div",[t("p",[e._v("故障单号： "+e._s(e.showData.rnumber))]),t("p",[e._v("维修类别： "+e._s(e.showData.rsort))]),t("p",[e._v("故障设备： "+e._s(e.showData.f_equ))]),t("p",[e._v("故障单发起人： "+e._s(e.showData.init_id))]),t("p",[e._v("维修地点： "+e._s(e.showData.place))]),t("p",[e._v("维修备注："+e._s(e.showData.note))]),t("p",[e._v("创建时间："+e._s(e.date(e.showData.creation_time)))]),t("p",[e._v("接单时间："+e._s(e.date(e.showData.order_time)))]),t("p",[e._v("完成时间："+e._s(e.date(e.showData.finish_time)))]),t("el-popover",{attrs:{placement:"top",title:"接单师傅信息",width:"300",trigger:"click"}},[t("p",[e._v("名字："+e._s(e.user.name))]),t("p",[e._v("电话："+e._s(e.user.phone))]),t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("span",[e._v("接单师傅： "+e._s(e.showData.rid))])])]),t("p",[e._v("故障单状态： "),t("el-tag",{attrs:{size:"mini",effect:"dark",type:"info"}},[e._v(" "+e._s(e.showData.order_state))])],1)],1)])],1)},ws=[],Ss={name:"FinishedTable",data(){return{tableData:[],dialogVisible:!1,showData:[],user:{name:"",phone:"",addr:""}}},mounted(){this.tableData=JSON.parse(sessionStorage.getItem("finished"))},methods:{beforelogin(){Ce({method:"POST",url:"/user",params:{id:this.showData.rid}}).then((e=>{this.user.name=e.data[0].user_name,this.user.phone=e.data[0].user_phone}))},date(e){let t=new Date(e),s=t.toLocaleTimeString("chinese",{hour12:!1}),a=t.toLocaleDateString();return a+" "+s},star(){this.$message.info({message:"评价功能还没写! emo",showClose:!0,duration:1500})},handleEdit(e,t){this.dialogVisible=!0,this.showData=t},refresh(){Ce({method:"POST",url:"/getfinished",params:{id:sessionStorage.getItem("id")}}).then((e=>{sessionStorage.setItem("finished",JSON.stringify(e.data)),this.tableData=JSON.parse(sessionStorage.getItem("finished")),this.$message.success({message:"刷新成功",duration:1e3,showClose:!0})}),(()=>{this.$message.error({message:"数据库连接失败",duration:1500,showClose:!0})}))}}},Cs=Ss,ys=(0,re.Z)(Cs,bs,ws,!1,null,"4b538e53",null),Ds=ys.exports,xs=function(){var e=this,t=e._self._c;return t("div",{staticClass:"completedtables"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"medium"}},[t("el-table-column",{attrs:{label:"故障单号"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.rnumber))])]}}])}),t("el-table-column",{attrs:{label:"故障设备"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.f_equ))])]}}])}),t("el-table-column",{attrs:{label:"地点"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-popover",{attrs:{placement:"top"}},[t("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(t){return e.handleShow(s.$index,s.row)}}},[e._v("详细")]),t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("span",[e._v(e._s(s.row.place))])])],1)]}}])})],1),t("div",{staticClass:"refresh"},[t("el-button",{attrs:{size:"medium"},on:{click:e.refresh}},[e._v("刷新")])],1),t("el-dialog",{attrs:{visible:e.dialogVisible,width:"70%","show-close":!1,"custom-class":"menudialog",top:"20vh","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t},open:e.beforelogin}},[t("div",[t("p",[e._v("故障单号： "+e._s(e.showData.rnumber))]),t("p",[e._v("维修类别： "+e._s(e.showData.rsort))]),t("p",[e._v("故障设备： "+e._s(e.showData.f_equ))]),t("el-popover",{attrs:{placement:"top",title:"故障单发起人信息",width:"300",trigger:"click"}},[t("p",[e._v("名字："+e._s(e.user.name))]),t("p",[e._v("电话："+e._s(e.user.phone))]),t("p",[e._v("默认地址："+e._s(e.user.addr))]),t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("p",[e._v("故障单发起人： "+e._s(e.showData.init_id))])])]),t("p",[e._v("维修地点： "+e._s(e.showData.place))]),t("p",[e._v("维修备注："+e._s(e.showData.note))]),t("p",[e._v("创建时间："+e._s(e.date(e.showData.creation_time)))]),t("p",[e._v("接单时间："+e._s(e.date(e.showData.order_time)))]),t("p",[e._v("完成时间："+e._s(e.date(e.showData.finish_time)))]),t("p",[e._v("故障单状态： "),t("el-tag",{attrs:{size:"mini",effect:"dark",type:"info"}},[e._v(" "+e._s(e.showData.order_state))])],1)],1)])],1)},ks=[],$s={name:"CompletedTable",data(){return{tableData:[],dialogVisible:!1,showData:[],user:{name:"",phone:"",addr:""}}},mounted(){this.tableData=JSON.parse(sessionStorage.getItem("completed"))},methods:{beforelogin(){Ce({method:"POST",url:"/user",params:{id:this.showData.init_id}}).then((e=>{this.user.name=e.data[0].user_name,this.user.phone=e.data[0].user_phone,this.user.addr=e.data[0].user_addr}))},date(e){let t=new Date(e),s=t.toLocaleTimeString("chinese",{hour12:!1}),a=t.toLocaleDateString();return a+" "+s},handleShow(e,t){this.showData=t,this.dialogVisible=!0},refresh(){Ce({method:"POST",url:"/getcompleted",params:{rid:sessionStorage.getItem("id")}}).then((e=>{sessionStorage.setItem("completed",JSON.stringify(e.data)),this.tableData=JSON.parse(sessionStorage.getItem("completed")),this.$message.success({message:"刷新成功",duration:1e3,showClose:!0})}),(()=>{this.$message.error({message:"数据库连接失败",duration:1500,showClose:!0})}))}}},Os=$s,Is=(0,re.Z)(Os,xs,ks,!1,null,"8732e1b2",null),Ts=Is.exports,Vs=new de.ZP({routes:[{path:"/",name:"login",component:Ue},{path:"/phone",name:"phone",component:Xe,children:[{name:"neworder",path:"new-order",component:ot},{name:"ordermanagement",path:"order-management",component:vt,children:[{name:"push",path:"push",component:hs},{name:"receiving",path:"receiving",component:_s},{name:"finished",path:"finished",component:Ds}]},{name:"completed",path:"completed",component:Mt,children:[{name:"completed_table",path:"completed-table",component:Ts},{name:"echarts",path:"echarts",component:os}]},{name:"manageaccount",path:"manage-account",component:ct},{name:"work",path:"work",component:qt}]}]});te["default"].use(de.ZP),te["default"].use(ee()),te["default"].use(X()),te["default"].use(K()),te["default"].use(B()),te["default"].use(U()),te["default"].use(R()),te["default"].use(j()),te["default"].use(E()),te["default"].use(Z()),te["default"].use(J()),te["default"].use(P()),te["default"].use(z()),te["default"].use(T()),te["default"].use(O()),te["default"].use(k()),te["default"].use(D()),te["default"].use(C()),te["default"].use(w()),te["default"].use(_()),te["default"].use(f()),te["default"].use(p()),te["default"].use(h()),te["default"].use(u()),te["default"].prototype.$message=l(),te["default"].prototype.$confirm=r().confirm,te["default"].prototype.$notify=i(),te["default"].config.productionTip=!1,Vs.beforeEach(((e,t,s)=>{"login"!==e.name&&null==sessionStorage.getItem("id")?s({name:"login"}):s()})),new te["default"]({render:e=>e(le),router:Vs}).$mount("#app")}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,a,i,o){if(!a){var r=1/0;for(u=0;u<e.length;u++){a=e[u][0],i=e[u][1],o=e[u][2];for(var n=!0,l=0;l<a.length;l++)(!1&o||r>=o)&&Object.keys(s.O).every((function(e){return s.O[e](a[l])}))?a.splice(l--,1):(n=!1,o<r&&(r=o));if(n){e.splice(u--,1);var d=i();void 0!==d&&(t=d)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[a,i,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,o,r=a[0],n=a[1],l=a[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(i in n)s.o(n,i)&&(s.m[i]=n[i]);if(l)var u=l(s)}for(t&&t(a);d<r.length;d++)o=r[d],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(u)},a=self["webpackChunkdatabases"]=self["webpackChunkdatabases"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(1105)}));a=s.O(a)})();